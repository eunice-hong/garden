---
title: 08장 예외 처리
description: 코루틴 실행 도중 예외가 발생했을 때 코루틴이 어떻게 동작하는지 알아보고, 예외를 처리하는 방법에 대해 알아본다.
date: 2024-09-22T21:00:00
draft: true
noindex: false
---
# 8.1. 코루틴과 예외
## 8.1.1. 코루틴의 예외 전파
### 8.1.1.1. 코루틴에서 예외가 전파되는 방식  
8.1.2. 예제로 알아보는 예외 전파  
## 8.1.2. 코루틴의 예외 정보 전달
## 8.1.2. 코루틴의 취소 전파

# 8.2. 예외 전파 제한
## 8.2.1. 예외 전파 제한방법: Job 객체
## 8.2.2. 예외 전파 제한방법: SupervisorJob 객체
## 8.2.3. 예외 전파 제한방법: supervisorScope
# 8.3. 예외 처리 방법

## 8.3.1. CoroutineExceptionHandler  
8.3.1. CoroutineExceptionHandler 생성  
8.3.2. CoroutineExceptionHandler 사용  
8.3.3. 처리되지 않은 예외만 처리하는 CoroutineExceptionHandler  
8.3.4. CoroutineExceptionHandler가 예외를 처리하도록 만들기  
8.3.5. CoroutineExceptionHandler는 예외 전파를 제한하지 않는다  
## 8.3.2. try catch문
8.4.1. try catch문을 사용해 코루틴 예외 처리하기
8.4.2. 코루틴 빌더 함수에 대한 try catch문은 코루틴의 예외를 잡지 못한다  
# 8.5. 예외 처리: async
8.5.1. async의 예외 노출  
8.5.2. async의 예외 전파  
# 8.6. 전파되지 않는 예외  
8.6.1. 전파되지 않는 CancellationException  
8.6.2. 코루틴 취소 시 사용되는 JobCancellationException  
8.6.3. withTimeOut 사용해 코루틴의 실행 시간 제한하기  
# 8.7. 요약  

1. 애플리케이션은 다양한 예외 상황에 노출되며, 예외를 적절히 처리해 애플리케이션의 안정성을 확보할 수 있다.
2. 코루틴은 비동기 작업을 실행할 때 사용되기 때문에 애플리케이션의 안정성을 위해 예외 처리가 필수적이다.
	1. 코루틴에서 발생한 예외는 부모 코루틴으로 전파되며, 적절히 처리되지 않으면 최상위 루트 코루틴까지 전파된다.
	2. 예외를 전파받은 코루틴이 취소되면 해당 코루틴의 모든 자식 코루틴에 취소가 전파된다. 즉, 루트 코루틴이 예외로 취소되면 구조화된 모든 코루틴이 취소된다.
3. 새로운 루트 Job 객체를 통해 코루틴의 구조화를 깨서 코루틴의 예외 전파를 제한할 수 있다.
4. Supervisorjob 객체를 사용해 예외 전파를 제한할 수 있다. Supervisorjob 객체는 예외를 전파받지 않는 특수한 Job 객체이다.
	1. Supervisorjob 객체는 예외를 전파받지 않지만 예외 정보는 전달받는다.
	2. 예외가 전파되거나 예외 정보가 전달된 경우 해당 코루틴에서 예외가 처리된 것으로 본다.
5. CoroutineExceptionHandler 객체는 공통 예외 처리기로서 동작하며, 이미 처리된 예외에 대해서는 동작하지 않는다. 즉, 예외가 마지막으로 전파되는 또는 전달되는 위치에 설정되지 않으면 동작하지 않는다.
	1. CoroutineExceptionHandler 객체는 예외 전파를 제한하지 않는다.
6. 코루틴 내부에서 try catch문을 사용해 예외를 처리할 수 있다.
	1. 코루틴 빌더 함수에 대한 try catch문은 코루틴이 실행될 때 발생하는 예외를 잡지 못한다.
7. async 함수로 생성된 코루틴에서 발생한 예외는 await 호출 시 노출된다.
	1. async 코루틴에서 발생한 예외 또한 부모 코루틴으로 전파된다.
8. CancellationException은 다른 예외와 달리 부모 코루틴으로 전파되지 않는다.
	1. CancellationException이 전파되지 않는 이유는 CancellationException 은 코루틴을 취소하기 위한 특별한 예외이기 때문이다. Job 객체에 cancel 함수를 호출하면 CancellcationException의 서브 클래스인 JobCancellationException이 발생해 코루틴이 취소된다.
9. withTimeOut 함수를 사용해 코루틴의 실행 시간을 제한할 수 있다. 
	1. withTimeOut 함수는 실행 시간 초과 시 CancellationException의 서브 클래스인 TimeoutCancellationException을 발생시켜 해당 코루틴만 취소한다.
	2. withTimeOutOrNull을 사용하면 실행 시간 초과 시 null이 반환되도록 할 수 있다.



# 참고 자료
- [[Notes/Summary/Reading/코틀린-코루틴의-정석/07장 구조화된 동시성|07장 구조화된 동시성]]
- [[Notes/Summary/Reading/코틀린-코루틴의-정석/09장 일시 중단 함수|09장 일시 중단 함수]]

- [[Kotlin] Coroutine suspend function 은 대체 뭐야?](https://nuritech.tistory.com/16)

